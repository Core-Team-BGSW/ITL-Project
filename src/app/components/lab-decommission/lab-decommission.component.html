<h2>Lab List</h2>
<div class="subheading">
  <p>*Select Lab for Decommission</p>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- Search Bar -->
<div class="search-bar">
  <input type="text" [(ngModel)]="searchQuery" placeholder="Search labs..." />
  <button class="search" (click)="onSearch()"><i class="fa fa-search"></i></button>
</div>

<ul class="lab-list">
  <li *ngFor="let lab of labList | filter : searchQuery" class="lab-item">
    
    <!-- Collapsible Section Header -->
    <div class="collapsible-header">
      <span class="lab-header" (click)="toggleDetails(lab._id)">
        <ul>
          <li class="lab-number">{{ lab["labNo"] }}</li>
          
          <li class="lab-subheader">
            {{ lab.entityName }} -> {{ lab.gb}} -> {{ lab.dep_name }}
          </li>
          
        </ul>
      </span>
      <button
        *ngIf="!isExpanded(lab._id)"
        (click)="removeLab(lab._id)"
        class="remove-button"
      >
        Decommission
      </button>
    </div>
    <!-- Collapsible Content -->
    <div *ngIf="isExpanded(lab._id)" class="collapsible-content">
      <p></p>
            <table class="lab_details_table">
              <thead>
              <tr>
                <th style="background-color:#0088d4">Region</th>
                <th style="background-color:#0088d4">Country</th>
                <th style="background-color:#0088d4">Location-Code</th>
                <th style="background-color:#0088d4">Entity</th>
                <th style="background-color:#0088d4">GB</th>
              </tr>
              </thead>
              <tbody>
                <tr>
                  <td>{{ lab.region }} </td>
                  <td>{{ lab.country }}</td>
                  <td>{{ lab["locationCode"] }}</td>
                  <td>{{ lab.entityName }}</td>
                  <td>{{ lab.gb }}</td>
                </tr>
              </tbody>
             </table>
             <table class="lab_details_table">
              <thead>
                <tr>
                <th style="background-color:#0088d4">Department Head (DH)</th>
                <th style="background-color:#0088d4">Local-ITL </th>
                <th style="background-color:#0088d4">Local-ITL Proxy</th>
                <th style="background-color:#0088d4">Key Account Manager (KAM)</th>
                </tr>
              </thead>
              <tr>
                <td >{{ lab["dh"] }}</td>
                <td>{{ lab["local_itl"] }}</td>
                <td>{{ lab["local_itl_proxy"] }}</td>
                <td>{{ lab["kam"] }}</td>
              </tr>
             </table>
             <table class="lab_details_table">
              <thead>
                <tr>
                  <th style="background-color:#0088d4">Department</th>
                  <th style="background-color:#0088d4">Floor No</th>
                  <th style="background-color:#0088d4">Lab No</th>
                  <th style="background-color:#0088d4">Kind of Lab</th>
                  <th style="background-color:#0088d4">Shared Lab</th>
                </tr>
              </thead>
              <tbody >
                <tr>
                  <td>{{ lab["dep_name"] }}</td>
                  <td>{{ lab["floor"] }}</td>
                  <td>{{ lab["LabNo"] }}</td>
                  <td>{{ lab["kind_of_lab"] }}</td>
                  <td>{{ lab["shared_lab"] }}</td>
                </tr>
              </tbody>
             </table>
             <table class="lab_details_table">
              <thead>
                <tr>
                  <th style="background-color:#0088d4">Primary Lab Coordinator</th>
                  <th style="background-color:#0088d4">Secondary Lab Coordinator</th>
                  <th style="background-color:#0088d4">Cost Center</th>
                  <th style="background-color:#0088d4">ACL Required</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>{{ lab["primary_lab_cord"] }}</td>
                  <td>{{ lab["secondary_lab_cord"] }}</td>
                  <td>{{ lab["cost_center"] }}</td>
                  <td>{{lab["acl_req"]}}</td>
                </tr>
              </tbody>
             </table>
             <table class="lab_details_table">
              <thead>
                <tr>
                  <th style="background-color:#0088d4">Purpose of Lab in Brief </th>
                  <th style="background-color:#0088d4">Description </th>
                  <th style="background-color:#0088d4">Self Audit Date</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>{{lab["purpose_of_lab"]}}</td>
                  <td>{{lab["description"]}}</td>
                  <td>{{lab["self_audit_date"]}}</td>
                </tr>
              </tbody>
             </table>
    <button (click)="removeLab(lab._id)" class="remove-button">
        Decommission
      </button>
    </div>
  </li>
</ul>
